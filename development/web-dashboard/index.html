<!DOCTYPE html><html class=no-js lang=en> <head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="An open source, self-hosted dashboard for usage analytics of general use applications." name=description><meta content=Freenalytics name=author><link href=https://freenalytics.github.io/development/web-dashboard/ rel=canonical><link href=../../assets/logo.png rel=icon><meta content="mkdocs-1.3.1, mkdocs-material-8.5.2" name=generator><title>Web Dashboard - Freenalytics</title><link href=../../assets/stylesheets/main.9f9400aa.min.css rel=stylesheet><link href=../../assets/stylesheets/palette.cbb835fc.min.css rel=stylesheet><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link href=../../assets/stylesheets/glightbox.min.css rel=stylesheet><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src=../../assets/javascripts/glightbox.min.js></script></head> <body data-md-color-accent=blue data-md-color-primary=deep-orange data-md-color-scheme=default dir=ltr> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox> <input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a class=md-skip href=#web-dashboard-development> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav aria-label=Header class="md-header__inner md-grid"> <a aria-label=Freenalytics class="md-header__button md-logo" data-md-component=logo href=../.. title=Freenalytics> <svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64v336c0 44.2 35.8 80 80 80h400c17.7 0 32-14.3 32-32s-14.3-32-32-32H80c-8.8 0-16-7.2-16-16V64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l89.4-89.3 57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"></path></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Freenalytics </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Web Dashboard </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input aria-label="Switch to dark mode" class=md-option data-md-color-accent=blue data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary=deep-orange data-md-color-scheme=default id=__palette_1 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_2 hidden title="Switch to dark mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"></path></svg> </label> <input aria-label="Switch to light mode" class=md-option data-md-color-accent=blue data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary=deep-orange data-md-color-scheme=slate id=__palette_2 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_1 hidden title="Switch to light mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"></path></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=Search required spellcheck=false type=text> <label class="md-search__icon md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </label> <nav aria-label=Search class=md-search__options> <button aria-label=Clear class="md-search__icon md-icon" tabindex=-1 title=Clear type=reset> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a class=md-source data-md-component=source href=https://github.com/freenalytics/freenalytics title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg> </div> <div class=md-source__repository> freenalytics/freenalytics </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav aria-label=Tabs class=md-tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a class=md-tabs__link href=../..> Home </a> </li> <li class=md-tabs__item> <a href=../../getting-started/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../reference/ class=md-tabs__link> Reference </a> </li> <li class=md-tabs__item> <a href=../../official-templates/ class=md-tabs__link> Official Templates </a> </li> <li class=md-tabs__item> <a href=../../examples/ class=md-tabs__link> Examples </a> </li> <li class=md-tabs__item> <a href=../../data-treatment/ class=md-tabs__link> Data Treatment </a> </li> <li class=md-tabs__item> <a href=../ class="md-tabs__link md-tabs__link--active"> Development </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=Navigation class="md-nav md-nav--primary md-nav--lifted" data-md-level=0> <label class=md-nav__title for=__drawer> <a aria-label=Freenalytics class="md-nav__button md-logo" data-md-component=logo href=../.. title=Freenalytics> <svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64v336c0 44.2 35.8 80 80 80h400c17.7 0 32-14.3 32-32s-14.3-32-32-32H80c-8.8 0-16-7.2-16-16V64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l89.4-89.3 57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"></path></svg> </a> Freenalytics </label> <div class=md-nav__source> <a class=md-source data-md-component=source href=https://github.com/freenalytics/freenalytics title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg> </div> <div class=md-source__repository> freenalytics/freenalytics </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../..> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_2 id=__nav_2 type=checkbox> <label class=md-nav__link for=__nav_2> Getting Started <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Getting Started" class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../getting-started/docker-hosting/ class=md-nav__link> Hosting with Docker </a> </li> <li class=md-nav__item> <a href=../../getting-started/node-hosting/ class=md-nav__link> Hosting with Node.js </a> </li> <li class=md-nav__item> <a href=../../getting-started/creating-your-first-application/ class=md-nav__link> Creating your First Application </a> </li> <li class=md-nav__item> <a href=../../getting-started/uploading-data/ class=md-nav__link> Uploading Data </a> </li> <li class=md-nav__item> <a href=../../getting-started/exporting-data/ class=md-nav__link> Exporting Data </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_3 id=__nav_3 type=checkbox> <label class=md-nav__link for=__nav_3> Reference <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Reference class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../reference/application/ class=md-nav__link> Application </a> </li> <li class=md-nav__item> <a href=../../reference/schema/ class=md-nav__link> Schema </a> </li> <li class=md-nav__item> <a href=../../reference/connector/ class=md-nav__link> Connector </a> </li> <li class=md-nav__item> <a href=../../reference/data-entries/ class=md-nav__link> Data Entries </a> </li> <li class=md-nav__item> <a href=https://freenalytics.github.io/api-docs/ class=md-nav__link> API Reference </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_4 id=__nav_4 type=checkbox> <label class=md-nav__link for=__nav_4> Official Templates <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Official Templates" class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Official Templates </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../official-templates/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../official-templates/web-template/ class=md-nav__link> Official Web Template </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_5 id=__nav_5 type=checkbox> <label class=md-nav__link for=__nav_5> Examples <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Examples class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../examples/webpage-example/ class=md-nav__link> Webpage Example </a> </li> <li class=md-nav__item> <a href=../../examples/discord-bot-example/ class=md-nav__link> Discord Bot Example </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_6 id=__nav_6 type=checkbox> <label class=md-nav__link for=__nav_6> Data Treatment <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Data Treatment" class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Data Treatment </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../data-treatment/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../data-treatment/page-clicks-view/ class=md-nav__link> Page Clicks View </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 id=__nav_7 type=checkbox> <label class=md-nav__link for=__nav_7> Development <span class="md-nav__icon md-icon"></span> </label> <nav aria-label=Development class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../server/ class=md-nav__link> Server </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc> Web Dashboard <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Web Dashboard </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#requirements> Requirements </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#setting-up> Setting Up </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#setting-up-the-development-environment> Setting Up the Development Environment </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#starting-the-server> Starting the Server </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#considerations> Considerations </a> <nav aria-label=Considerations class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#linting> Linting </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#unit-testing> Unit Testing </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#component-structure> Component Structure </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#component-code> Component Code </a> <nav aria-label="Component Code" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#example-component> Example Component </a> <nav aria-label="Example Component" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#mycomponentmycomponenttsx> myComponent/MyComponent.tsx </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#mycomponentindexts> myComponent/index.ts </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#mycomponentindexscss> myComponent/index.scss </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#page-code> Page Code </a> <nav aria-label="Page Code" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#example-page> Example Page </a> <nav aria-label="Example Page" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#mypagemypagetsx> myPage/MyPage.tsx </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#mypageindexts> myPage/index.ts </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#mypageindexscss> myPage/index.scss </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#adding-to-the-router> Adding to the Router </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#localization> Localization </a> <nav aria-label=Localization class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#adding-strings> Adding Strings </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#using-strings> Using Strings </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#using-the-api> Using the API </a> <nav aria-label="Using the API" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#example-request> Example Request </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#making-requests-inside-components> Making Requests Inside Components </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#creating-forms> Creating Forms </a> <nav aria-label="Creating Forms" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#example-form> Example Form </a> <nav aria-label="Example Form" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#myformtypests> myForm/types.ts </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#myformmyformtsx> myForm/MyForm.tsx </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#myformmyformlogictsx> myForm/MyFormLogic.tsx </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#myformmyformviewtsx> myForm/MyFormView.tsx </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#myformindexts> myForm/index.ts </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle=__nav_7_4 id=__nav_7_4 type=checkbox> <label class=md-nav__link for=__nav_7_4> Connector Development <span class="md-nav__icon md-icon"></span> </label> <nav aria-label="Connector Development" class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_7_4> <span class="md-nav__icon md-icon"></span> Connector Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../connectors/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../connectors/custom-connector/ class=md-nav__link> Custom Connector </a> </li> <li class=md-nav__item> <a href=../connectors/freenalytics-connector-web/ class=md-nav__link> freenalytics-connector-web </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#requirements> Requirements </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#setting-up> Setting Up </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#setting-up-the-development-environment> Setting Up the Development Environment </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#starting-the-server> Starting the Server </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#considerations> Considerations </a> <nav aria-label=Considerations class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#linting> Linting </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#unit-testing> Unit Testing </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#component-structure> Component Structure </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#component-code> Component Code </a> <nav aria-label="Component Code" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#example-component> Example Component </a> <nav aria-label="Example Component" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#mycomponentmycomponenttsx> myComponent/MyComponent.tsx </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#mycomponentindexts> myComponent/index.ts </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#mycomponentindexscss> myComponent/index.scss </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#page-code> Page Code </a> <nav aria-label="Page Code" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#example-page> Example Page </a> <nav aria-label="Example Page" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#mypagemypagetsx> myPage/MyPage.tsx </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#mypageindexts> myPage/index.ts </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#mypageindexscss> myPage/index.scss </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#adding-to-the-router> Adding to the Router </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#localization> Localization </a> <nav aria-label=Localization class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#adding-strings> Adding Strings </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#using-strings> Using Strings </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#using-the-api> Using the API </a> <nav aria-label="Using the API" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#example-request> Example Request </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#making-requests-inside-components> Making Requests Inside Components </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=#creating-forms> Creating Forms </a> <nav aria-label="Creating Forms" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#example-form> Example Form </a> <nav aria-label="Example Form" class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <a class=md-nav__link href=#myformtypests> myForm/types.ts </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#myformmyformtsx> myForm/MyForm.tsx </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#myformmyformlogictsx> myForm/MyFormLogic.tsx </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#myformmyformviewtsx> myForm/MyFormView.tsx </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#myformindexts> myForm/index.ts </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=web-dashboard-development>Web Dashboard Development<a class=headerlink href=#web-dashboard-development title="Permanent link">¶</a></h1> <div class="admonition warning"> <p class=admonition-title>Warning<p>If you wish to develop the web dashboard, please head over to the <a href=../server/ >Server Development</a> page and follow the set up steps first. You need a local Freenalytics server when developing the web dashboard.</p> </p> </div> <p>The <a href=https://github.com/freenalytics/freenalytics>freenalytics/freenalytics</a> repository is a monorepo containing both the web dashboard and the server.</p> <p>Any changes made to the web dashboard should be made in this repository.</p> <h2 id=requirements>Requirements<a class=headerlink href=#requirements title="Permanent link">¶</a></h2> <p>In order to develop for the web dashboard you will need:</p> <ul> <li><a href=https://git-scm.com/ >git</a></li> <li><a href=https://nodejs.org/en/ >Node.js</a> (Version 16.15.1 was used)</li> </ul> <h2 id=setting-up>Setting Up<a class=headerlink href=#setting-up title="Permanent link">¶</a></h2> <p>First, clone the repository:</p> <div class=highlight><pre><span></span><code>git clone https://github.com/freenalytics/freenalytics
</code></pre></div> <p>Head over to the <code>web-dashboard</code> folder:</p> <div class=highlight><pre><span></span><code>cd web-dashboard
</code></pre></div> <p>And then, install the dependencies:</p> <div class=highlight><pre><span></span><code>npm install
</code></pre></div> <h2 id=setting-up-the-development-environment>Setting Up the Development Environment<a class=headerlink href=#setting-up-the-development-environment title="Permanent link">¶</a></h2> <p>As mentioned before, the web dashboard requires you to have a local server running on port <strong>4000</strong>. If you don't have the server set up properly yet, please visit the <a href=../server/ >Server Development</a> page.</p> <p>Once you have the server set up correctly, start it up with:</p> <div class=highlight><pre><span></span><code>npm run dev:watch
</code></pre></div> <h2 id=starting-the-server>Starting the Server<a class=headerlink href=#starting-the-server title="Permanent link">¶</a></h2> <p>To start the development server, run:</p> <div class=highlight><pre><span></span><code>npm run dev
</code></pre></div> <p>A React development server will start on port <strong>3000</strong>. This server has hot-reload capabilities, meaning that if you change a file while the server is running, the changes will be displayed live on your browser.</p> <h2 id=considerations>Considerations<a class=headerlink href=#considerations title="Permanent link">¶</a></h2> <h3 id=linting>Linting<a class=headerlink href=#linting title="Permanent link">¶</a></h3> <p>This project uses ESLint rules to maintain a consistent code style. You can run the linter to check for any linting errors with:</p> <div class=highlight><pre><span></span><code>npm run lint
</code></pre></div> <p>And fix any fixable errors automatically with:</p> <div class=highlight><pre><span></span><code>npm run lint:fix
</code></pre></div> <h3 id=unit-testing>Unit Testing<a class=headerlink href=#unit-testing title="Permanent link">¶</a></h3> <p>This project contains unit tests for certain functionality. Visual components are currently not tested, only utilities are.</p> <p>You can run the unit tests with:</p> <div class=highlight><pre><span></span><code>npm run test
</code></pre></div> <p>Or, if you want to run the test suites in watch mode (will re-run relevant tests on file save), you can use:</p> <div class=highlight><pre><span></span><code>npm run test:watch
</code></pre></div> <h2 id=component-structure>Component Structure<a class=headerlink href=#component-structure title="Permanent link">¶</a></h2> <p>This project follows the following structure:</p> <ul> <li>Any style sheet should be imported in the <code>src/index.tsx</code> file.</li> <li>Any <code>ContextProvider</code> should be included in the <code>src/App.tsx</code> file.</li> <li>Page components should be placed inside <code>src/pages/page_name/PageComponent.tsx</code>.</li> <li>Components used only in a certain page should be placed inside <code>src/components/pageComponents/page_name/component_name/Component.tsx</code>.</li> <li>Components used in multiple places should be placed inside <code>src/components/common/component_name/Component.tsx</code>.</li> <li>Data visualization components should be placed inside <code>src/components/dataVisualization/component_name/Component.tsx</code>.</li> <li>Form components should be placed inside <code>src/components/forms/form_name/FormComponent.tsx</code>.</li> <li>Form control components should be placed inside <code>src/components/common/form/component_name/Component.tsx</code>.</li> </ul> <p>Component folder names should be in <code>camelCase</code> and component files should be in <code>PascalCase</code> and should have a <code>.tsx</code> extension. Inside each component folder there should be a <code>index.ts</code> file that proxy exports the relevant components inside the folder.</p> <p>Following this structure ensures that the code remains consistent.</p> <p>Inside any component, it is recommended to organize the imports in the following way:</p> <ol> <li>Anything from the <code>react</code> package.</li> <li>Any React component that comes from a third-party library.</li> <li>Any React hook that comes from a third-party library.</li> <li>Local React components.</li> <li>Local React hooks.</li> <li>Anything else.</li> </ol> <h2 id=component-code>Component Code<a class=headerlink href=#component-code title="Permanent link">¶</a></h2> <p>As mentioned before, component folder names should be in <code>camelCase</code> and component files should be in <code>PascalCase</code> and should have a <code>.tsx</code> extension. Inside each component folder there should be a <code>index.ts</code> file that proxy exports the relevant components inside the folder.</p> <h3 id=example-component>Example Component<a class=headerlink href=#example-component title="Permanent link">¶</a></h3> <p>Let's say we want to create a common component named <code>MyComponent</code>.</p> <p>We should then create a folder named <code>src/components/common/myComponent</code> and inside this folder we will create the following files:</p> <ul> <li><code>MyComponent.tsx</code>: This file will contain the code relevant to the component itself.</li> <li><code>index.ts</code>: This file will proxy export the component. (More on this later.)</li> <li><code>index.scss</code>: This file will contain any styles relevant to this component.</li> </ul> <div class="admonition note"> <p class=admonition-title>Note<p>This folder may contain more components if they're closely related to <code>MyComponent</code> (for example, sub-components). Other files like typings can also be included in here.</p> </p> </div> <div class="admonition note"> <p class=admonition-title>Note<p>The <code>index.scss</code> file is not required if the component does not need any custom styles.</p> </p> </div> <h4 id=mycomponentmycomponenttsx>myComponent/MyComponent.tsx<a class=headerlink href=#mycomponentmycomponenttsx title="Permanent link">¶</a></h4> <p>Let's create the component itself first.</p> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=nx>React</span><span class=p>,</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'react'</span><span class=p>;</span><span class=w></span>

<span class=kd>interface</span><span class=w> </span><span class=nx>Props</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=w></span>
<span class=p>}</span><span class=w></span>

<span class=kd>const</span><span class=w> </span><span class=nx>MyComponent</span><span class=o>:</span><span class=w> </span><span class=kt>React.FC</span><span class=o>&lt;</span><span class=nx>Props</span><span class=o>&gt;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>({</span><span class=w> </span><span class=nx>name</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>count</span><span class=p>,</span><span class=w> </span><span class=nx>setCount</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=o>&lt;</span><span class=kt>number</span><span class=o>&gt;</span><span class=p>(</span><span class=mf>0</span><span class=p>);</span><span class=w></span>

<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>handleButtonClick</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=nx>setCount</span><span class=p>(</span><span class=nx>count</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mf>1</span><span class=p>);</span><span class=w></span>
<span class=w>  </span><span class=p>};</span><span class=w></span>

<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=o>&lt;</span><span class=nx>div</span><span class=w> </span><span class=nx>className</span><span class=o>=</span><span class=s2>"my-style"</span><span class=o>&gt;</span><span class=w></span>
<span class=w>      </span><span class=o>&lt;</span><span class=nx>p</span><span class=o>&gt;</span><span class=w></span>
<span class=w>        </span><span class=nx>Hello</span><span class=w> </span><span class=nx>there</span><span class=w> </span><span class=p>{</span><span class=nx>name</span><span class=p>}</span><span class=o>!</span><span class=w></span>
<span class=w>      </span><span class=o>&lt;</span><span class=err>/p&gt;</span><span class=w></span>
<span class=w>      </span><span class=o>&lt;</span><span class=nx>button</span><span class=w> </span><span class=nx>onClick</span><span class=o>=</span><span class=p>{</span><span class=nx>handleButtonClick</span><span class=p>}</span><span class=o>&gt;</span><span class=w></span>
<span class=w>        </span><span class=nx>You</span><span class=w> </span><span class=nx>have</span><span class=w> </span><span class=nx>clicked</span><span class=w> </span><span class=k>this</span><span class=w> </span><span class=nx>button</span><span class=w> </span><span class=p>{</span><span class=nx>count</span><span class=p>}</span><span class=w> </span><span class=nx>times</span><span class=p>.</span><span class=w></span>
<span class=w>      </span><span class=o>&lt;</span><span class=err>/button&gt;</span><span class=w></span>
<span class=w>    </span><span class=o>&lt;</span><span class=err>/div&gt;</span><span class=w></span>
<span class=w>  </span><span class=p>);</span><span class=w></span>
<span class=p>};</span><span class=w></span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=nx>MyComponent</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>This is a simple component that greets the user specified with the <code>name</code> prop. It also includes a button that when clicked will update the counter inside.</p> <p>This example illustrates how <code>Props</code> should be an interface that describes the props that <code>MyComponent</code> requires, and how event handlers should be defined inside the component with a name that begins with <code>handle</code>.</p> <h4 id=mycomponentindexts>myComponent/index.ts<a class=headerlink href=#mycomponentindexts title="Permanent link">¶</a></h4> <p>As mentioned before, this component proxy exports <code>MyComponent.tsx</code>. What this means is that this file should import <code>MyComponent</code> and then re-export it.</p> <p>Why? Because this way we can have components inside their own folder and keep them inside a file with a relevant name and not with <code>index.tsx</code>. This way, when we import this component we will use:</p> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=nx>MyComponent</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'./components/common/myComponent'</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Instead of:</p> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=nx>MyComponent</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'./components/common/myComponent/MyComponent'</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>With that been said, the content of this <code>index.ts</code> file would be:</p> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=nx>MyComponent</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'./MyComponent'</span><span class=p>;</span><span class=w></span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=nx>MyComponent</span><span class=p>;</span><span class=w></span>
</code></pre></div> <h4 id=mycomponentindexscss>myComponent/index.scss<a class=headerlink href=#mycomponentindexscss title="Permanent link">¶</a></h4> <p>Since our component has some styles associated to it, we need to create this file.</p> <p>An example of what these styles could look like is:</p> <div class=highlight><pre><span></span><code><span class=nc>.my-style</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=nt>text-align</span><span class=nd>:</span><span class=w> </span><span class=nt>center</span><span class=o>;</span><span class=w></span>

<span class=w>    </span><span class=nt>p</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=nt>color</span><span class=nd>:</span><span class=w> </span><span class=nt>red</span><span class=o>;</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>

<span class=w>    </span><span class=nt>button</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>        </span><span class=nt>font-weight</span><span class=nd>:</span><span class=w> </span><span class=nt>700</span><span class=o>;</span><span class=w></span>
<span class=w>        </span><span class=nt>color</span><span class=nd>:</span><span class=w> </span><span class=nt>gray</span><span class=o>;</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <p>In order to include these styles, it is necessary to add an import of this file inside the <code>src/styles/main.scss</code> file.</p> <div class=highlight><pre><span></span><code><span class=k>@import</span><span class=w> </span><span class=s1>'../components/common/myComponent</span>
</code></pre></div> <p>Import order does matter and generally should be kept as:</p> <ol> <li>Common components</li> <li>Data visualization components</li> <li>Form components</li> <li>Page Components (<code>src/components/pageComponents</code>)</li> <li>Pages (<code>src/pages</code>)</li> </ol> <h2 id=page-code>Page Code<a class=headerlink href=#page-code title="Permanent link">¶</a></h2> <p>As with components, pages should also be located in their respective folders with the folder name being in <code>camelCase</code> and the page component file in <code>PascalCase</code> with a <code>.tsx</code> extension. Inside this folder there should also be a <code>index.ts</code> file that proxy exports the page component.</p> <h3 id=example-page>Example Page<a class=headerlink href=#example-page title="Permanent link">¶</a></h3> <p>For the sake of example, let's say we want to create a page named <code>MyPage</code>.</p> <p>We should then create a folder named <code>src/pages/myPage</code> and inside this folder we will create the following files:</p> <ul> <li><code>MyPage.tsx</code>: This file will contain the code relevant to the page itself.</li> <li><code>index.ts</code>: This file will proxy export the page component.</li> <li><code>index.scss</code>: This file will contain any styles relevant to the page.</li> </ul> <div class="admonition note"> <p class=admonition-title>Note<p>The <code>index.scss</code> file is not required if the page component does not need any custom styles.</p> </p> </div> <h4 id=mypagemypagetsx>myPage/MyPage.tsx<a class=headerlink href=#mypagemypagetsx title="Permanent link">¶</a></h4> <p>Let's create the page component itself first.</p> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=nx>React</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'react'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=nx>PageWrapper</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'../../components/common/pageWrapper'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=nx>useTitle</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'../../hooks/title'</span><span class=p>;</span><span class=w></span>

<span class=kd>const</span><span class=w> </span><span class=nx>MyPage</span><span class=o>:</span><span class=w> </span><span class=kt>React.FC</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=nx>useTitle</span><span class=p>(</span><span class=s1>'pages.my_page.title'</span><span class=p>);</span><span class=w></span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>t</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useLocale</span><span class=p>();</span><span class=w></span>

<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=o>&lt;</span><span class=nx>PageWrapper</span><span class=o>&gt;</span><span class=w></span>
<span class=w>      </span><span class=o>&lt;</span><span class=nx>div</span><span class=w> </span><span class=nx>className</span><span class=o>=</span><span class=s2>"my-page"</span><span class=o>&gt;</span><span class=w></span>
<span class=w>        </span><span class=nx>This</span><span class=w> </span><span class=nx>is</span><span class=w> </span><span class=nx>my</span><span class=w> </span><span class=nx>cool</span><span class=w> </span><span class=nx>page</span><span class=p>.</span><span class=w></span>
<span class=w>      </span><span class=o>&lt;</span><span class=err>/div&gt;</span><span class=w></span>
<span class=w>    </span><span class=o>&lt;</span><span class=err>/PageWrapper&gt;</span><span class=w></span>
<span class=w>  </span><span class=p>);</span><span class=w></span>
<span class=p>};</span><span class=w></span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=nx>MyPage</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>This is a simple page that simply says "This is my cool page.".</p> <p>In this example, the component <code>&lt;PageWrapper&gt;</code> will include the navbar and the footer with your page. If your page should render the navbar and footer then wrap your content in this component, if not you can omit it.</p> <div class="admonition note"> <p class=admonition-title>Note<p>Notice the string passed to <code>useTitle()</code>. This hook will update the title of the page with a string located in the <code>src/i18n/strings</code> resource folder. We still haven't seen how this project tackles <a href=#localization>Localization</a> so keep reading, it will then be explained.</p> </p> </div> <p>Additionally, an entry inside <code>src/i18n/strings/en.ts</code> will be inserted, inside the <code>PAGES</code> object, with the key:</p> <div class=highlight><pre><span></span><code>'pages.my_page.title'
</code></pre></div> <p>And with a value that should include the title of the page, which will be then displayed in the browser's window and tab.</p> <h4 id=mypageindexts>myPage/index.ts<a class=headerlink href=#mypageindexts title="Permanent link">¶</a></h4> <p>As it is the case for regular components, page components need to be proxy exported too. This file should then look like this:</p> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=nx>MyPage</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'./MyPage'</span><span class=p>;</span><span class=w></span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=nx>MyPage</span><span class=p>;</span><span class=w></span>
</code></pre></div> <h4 id=mypageindexscss>myPage/index.scss<a class=headerlink href=#mypageindexscss title="Permanent link">¶</a></h4> <p>Since our page component has some styles associated to it, we need to create this file.</p> <p>An example of what these styles could look like is:</p> <div class=highlight><pre><span></span><code><span class=nc>.my-page</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=nt>text-align</span><span class=nd>:</span><span class=w> </span><span class=nt>center</span><span class=o>;</span><span class=w></span>
<span class=w>    </span><span class=nt>color</span><span class=nd>:</span><span class=w> </span><span class=nt>white</span><span class=o>;</span><span class=w></span>
<span class=w>    </span><span class=nt>padding</span><span class=nd>:</span><span class=w> </span><span class=nt>2rem</span><span class=o>;</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <p>In order to include these styles, it is necessary to add an import of this file inside the <code>src/styles/main.scss</code> file.</p> <div class=highlight><pre><span></span><code><span class=k>@import</span><span class=w> </span><span class=s1>'../pages/myPage</span>
</code></pre></div> <p>This import should be added at the end of the file because we want to import page styles at the end.</p> <h4 id=adding-to-the-router>Adding to the Router<a class=headerlink href=#adding-to-the-router title="Permanent link">¶</a></h4> <p>Once the page component has been created, it is time to add it to the router.</p> <p>Currently, all routes are located in the <code>src/constants/routes.ts</code> file and are separated by access type. If the route is accessible by any user (whether they're logged in or not) then the route should be inside the <code>PUBLIC_ROUTES</code> object. Otherwise, if the user should be logged in to see the page, then add the route inside <code>PROTECTED_ROUTES</code>.</p> <p>Additionally, if your route is dynamic, meaning that it has a parameter in it, then create a function inside the <code>DYNAMIC_PROTECTED_ROUTES</code> that returns the route with the parameter applied to it.</p> <p>Once this is done, we can now import the page component inside our router and add a <code>&lt;Route&gt;</code> that renders this page component.</p> <p>For this, enter the <code>src/router/Router.tsx</code> file and modify it to import your page component:</p> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=nx>MyPage</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'../pages/myPage'</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>And add the route to it.</p> <ul> <li>If the page is public, then add the route like this:</li> </ul> <div class=highlight><pre><span></span><code><span class=o>&lt;</span><span class=nx>Route</span><span class=w> </span><span class=nx>path</span><span class=o>=</span><span class=p>{</span><span class=nx>PUBLIC_ROUTES</span><span class=p>.</span><span class=nx>myPage</span><span class=p>}</span><span class=w> </span><span class=nx>element</span><span class=o>=</span><span class=p>{</span><span class=o>&lt;</span><span class=nx>MyPage</span><span class=w> </span><span class=o>/&gt;</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span><span class=w></span>
</code></pre></div> <ul> <li>If it's protected, then add the route like this:</li> </ul> <div class=highlight><pre><span></span><code><span class=o>&lt;</span><span class=nx>Route</span><span class=w> </span><span class=nx>element</span><span class=o>=</span><span class=p>{</span><span class=o>&lt;</span><span class=nx>ProtectedRoute</span><span class=w> </span><span class=nx>allowed</span><span class=o>=</span><span class=p>{</span><span class=nx>loggedIn</span><span class=p>}</span><span class=w> </span><span class=nx>redirectPath</span><span class=o>=</span><span class=p>{</span><span class=nx>PUBLIC_ROUTES</span><span class=p>.</span><span class=nx>login</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span><span class=p>}</span><span class=o>&gt;</span><span class=w></span>
<span class=w>    </span><span class=p>{</span><span class=cm>/* ... */</span><span class=p>}</span><span class=w></span>
<span class=w>    </span><span class=o>&lt;</span><span class=nx>Route</span><span class=w> </span><span class=nx>path</span><span class=o>=</span><span class=p>{</span><span class=nx>PROTECTED_ROUTES</span><span class=p>.</span><span class=nx>myPage</span><span class=p>}</span><span class=w> </span><span class=nx>element</span><span class=o>=</span><span class=p>{</span><span class=o>&lt;</span><span class=nx>MyPage</span><span class=w> </span><span class=o>/&gt;</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span><span class=w></span>
<span class=o>&lt;</span><span class=err>/Route&gt;</span><span class=w></span>
</code></pre></div> <ul> <li>If the route is dynamic and protected, then add the route like this:</li> </ul> <div class=highlight><pre><span></span><code><span class=o>&lt;</span><span class=nx>Route</span><span class=w> </span><span class=nx>element</span><span class=o>=</span><span class=p>{</span><span class=o>&lt;</span><span class=nx>ProtectedRoute</span><span class=w> </span><span class=nx>allowed</span><span class=o>=</span><span class=p>{</span><span class=nx>loggedIn</span><span class=p>}</span><span class=w> </span><span class=nx>redirectPath</span><span class=o>=</span><span class=p>{</span><span class=nx>PUBLIC_ROUTES</span><span class=p>.</span><span class=nx>login</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span><span class=p>}</span><span class=o>&gt;</span><span class=w></span>
<span class=w>    </span><span class=p>{</span><span class=cm>/* ... */</span><span class=p>}</span><span class=w></span>
<span class=w>    </span><span class=o>&lt;</span><span class=nx>Route</span><span class=w> </span><span class=nx>path</span><span class=o>=</span><span class=p>{</span><span class=nx>DYNAMIC_PROTECTED_ROUTES</span><span class=p>.</span><span class=nx>myPage</span><span class=p>(</span><span class=s1>':param'</span><span class=p>)}</span><span class=w> </span><span class=nx>element</span><span class=o>=</span><span class=p>{</span><span class=o>&lt;</span><span class=nx>MyPage</span><span class=w> </span><span class=o>/&gt;</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span><span class=w></span>
<span class=o>&lt;</span><span class=err>/Route&gt;</span><span class=w></span>
</code></pre></div> <h2 id=localization>Localization<a class=headerlink href=#localization title="Permanent link">¶</a></h2> <p>You may have come across the weird string passed to the <code>useTitle()</code> hook in <a href=#mypagemypagetsx>myPage/MyPage.tsx</a>. This string is nothing more than a key that maps to an actual string that will be displayed on the page.</p> <p>Why? Localization.</p> <p>In the future, this project will be available in more languages other than English. For the time being, these strings will only exist in English but when more languages will be supported, each of these strings will need to be translated and added into their own files.</p> <h3 id=adding-strings>Adding Strings<a class=headerlink href=#adding-strings title="Permanent link">¶</a></h3> <p>To add strings to the localizations service, open the <code>src/i18n/strings</code> folder and access the file that you wish to edit. In this case, only English strings are available, so the file that we will update is <code>en.ts</code>.</p> <p>In here, you will find multiple objects. Each object serves as a way to organize these strings by type. You can find an object for:</p> <ul> <li>Strings inside pages. (<code>PAGES</code>)</li> <li>Strings inside common components. (<code>COMMON</code>)</li> <li>Strings inside forms. (<code>FORMS</code>)</li> <li>Strings inside error messages. (<code>ERRORS</code>)</li> </ul> <p>Each key should be well structured so it can clearly reflect where it is being used.</p> <p>Generally, the key should have this structure:</p> <div class=highlight><pre><span></span><code>&lt;type&gt;.&lt;page&gt;.&lt;component&gt;.&lt;name&gt;.&lt;type_of_string&gt;
</code></pre></div> <p>So, in this case, a component used in a page named <code>myPage</code> that is displayed inside a component named <code>myComponent</code> that is displayed in a button that should say "Accept" and that is part of a group of buttons should be:</p> <div class=highlight><pre><span></span><code>pages.my_page.my_component.buttons.accept.text
</code></pre></div> <p>The naming can be a bit subjective and maybe confusing, but as long as it extensively describes its usage it should be fine.</p> <p>The values of these strings should be in <a href=https://unicode-org.github.io/icu/userguide/format_parse/messages/ >ICU Format</a>. This allows for dynamic variables to be inserted, including modifying the text in cases where plural and singular versions differ.</p> <p>For example, if you want to include a variable named <code>name</code> inside a text, you can do so by defining it as:</p> <div class=highlight><pre><span></span><code>"Hello, my name is {name}."
</code></pre></div> <h3 id=using-strings>Using Strings<a class=headerlink href=#using-strings title="Permanent link">¶</a></h3> <p>Using these strings inside the components is as easy as importing the <code>useLocale()</code> hook and calling the <code>t()</code> function with the key of the string to use.</p> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=nx>useLocale</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'../../hooks/locale'</span><span class=p>;</span><span class=w></span>

<span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>t</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useLocale</span><span class=p>();</span><span class=w></span>
<span class=nx>t</span><span class=p>(</span><span class=s1>'common.my_string.text'</span><span class=p>)</span><span class=w></span>
</code></pre></div> <p>In the case that <code>common.my_string.text</code> includes a variable named <code>name</code> inside it, you can include an object in the <code>t()</code> call to include all the named variables in the resulting text.</p> <div class=highlight><pre><span></span><code><span class=nx>t</span><span class=p>(</span><span class=s1>'common.my_string.text'</span><span class=p>,</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=s1>'my name'</span><span class=w> </span><span class=p>})</span><span class=w></span>
</code></pre></div> <h2 id=using-the-api>Using the API<a class=headerlink href=#using-the-api title="Permanent link">¶</a></h2> <p>To use the API, a service file should be created inside the <code>src/services/api</code> folder, or use an already existing one. Services are separated by the type of entities that are used. In this case, applications and authenticate are the only entities available, so there is only <code>ApplicationService.ts</code> and <code>AuthService.ts</code>.</p> <p>These service files typically include interfaces to type the responses of the API, along with methods that call the API through Axios.</p> <p>Methods are separated in two, one method that makes the API call and the other one that returns an object with a key associated to the data fetched or mutated, and the function reference of the method that makes the API call.</p> <p>Why? This project uses <a href=https://tanstack.com/query/v4>TanStack Query</a> to cache the responses.</p> <h3 id=example-request>Example Request<a class=headerlink href=#example-request title="Permanent link">¶</a></h3> <p>Let's say we want to create a <code>GET</code> request to the <code>/applications/:id</code> endpoint.</p> <p>In this case, since we're talking about an <code>application</code> we should check the <code>ApplicationService.ts</code> file.</p> <p>Inside, we should create two methods as such:</p> <div class=highlight><pre><span></span><code><span class=k>private</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=nx>doGetApplicationByDomain</span><span class=p>(</span><span class=nx>domain</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=nb>Promise</span><span class=o>&lt;</span><span class=nx>ApplicationModel</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>response</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=nx>client</span><span class=p>.</span><span class=nx>instance</span><span class=p>.</span><span class=nx>get</span><span class=p>(</span><span class=sb>`/applications/</span><span class=si>${</span><span class=nx>domain</span><span class=si>}</span><span class=sb>`</span><span class=p>);</span><span class=w></span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=nx>response</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>data</span><span class=p>;</span><span class=w></span>
<span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=k>this</span><span class=p>.</span><span class=nx>client</span><span class=p>.</span><span class=nx>handleRequestError</span><span class=p>(</span><span class=nx>error</span><span class=p>);</span><span class=w></span>
<span class=w>    </span><span class=k>throw</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=nx>client</span><span class=p>.</span><span class=nx>createRequestError</span><span class=p>(</span><span class=nx>error</span><span class=p>);</span><span class=w></span>
<span class=w>  </span><span class=p>}</span><span class=w></span>
<span class=p>}</span><span class=w></span>

<span class=k>public</span><span class=w> </span><span class=nx>getApplicationByDomain</span><span class=p>(</span><span class=nx>domain</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=nx>key</span><span class=o>:</span><span class=w> </span><span class=p>[</span><span class=s1>'applications'</span><span class=p>,</span><span class=w> </span><span class=nx>domain</span><span class=p>],</span><span class=w></span>
<span class=w>    </span><span class=nx>fn</span><span class=o>:</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=k>this</span><span class=p>.</span><span class=nx>doGetApplicationByDomain</span><span class=p>(</span><span class=nx>domain</span><span class=p>)</span><span class=w></span>
<span class=w>  </span><span class=p>};</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <p>In this case, <code>doGetApplicationByDomain()</code> fetches the application data through the Axios instance in <code>this.client.instance</code> and returns the response. The <code>getApplicationByDomain()</code> returns an object with the key that will be used to cache this response and with a function reference that will actually fetch the data. This will be visited again in <a href=#making-requests-inside-components>making requests inside components</a>.</p> <p>Notice how the <code>doGetApplicationByDomain()</code> method returns a <code>Promise&lt;ApplicationModel&gt;</code>. This is an interface defined in this same file and could be defined as such (this is what the API returns):</p> <div class=highlight><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>VALID_APPLICATION_TYPES</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=s1>'mobile'</span><span class=p>,</span><span class=w> </span><span class=s1>'web'</span><span class=p>,</span><span class=w> </span><span class=s1>'server'</span><span class=p>,</span><span class=w> </span><span class=s1>'desktop'</span><span class=p>,</span><span class=w> </span><span class=s1>'other'</span><span class=p>]</span><span class=w> </span><span class=kr>as</span><span class=w> </span><span class=kd>const</span><span class=p>;</span><span class=w></span>
<span class=k>export</span><span class=w> </span><span class=kr>type</span><span class=w> </span><span class=nx>ApplicationType</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=ow>typeof</span><span class=w> </span><span class=nx>VALID_APPLICATION_TYPES</span><span class=p>[</span><span class=kt>number</span><span class=p>];</span><span class=w></span>

<span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>TemplateModel</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=nx>raw_schema</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=w></span>
<span class=w>  </span><span class=nx>schema</span><span class=o>:</span><span class=w> </span><span class=kt>object</span><span class=w></span>
<span class=p>}</span><span class=w></span>

<span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>ConnectorModel</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=nx>package_url</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=w></span>
<span class=w>  </span><span class=nx>language</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=w></span>
<span class=p>}</span><span class=w></span>

<span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>ApplicationModel</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=w></span>
<span class=w>  </span><span class=nx>owner</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=w></span>
<span class=w>  </span><span class=kr>type</span><span class=o>:</span><span class=w> </span><span class=nx>ApplicationType</span><span class=w></span>
<span class=w>  </span><span class=nx>domain</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=w></span>
<span class=w>  </span><span class=nx>template</span><span class=o>:</span><span class=w> </span><span class=kt>TemplateModel</span><span class=w></span>
<span class=w>  </span><span class=nx>connectors</span><span class=o>:</span><span class=w> </span><span class=kt>ConnectorModel</span><span class=p>[]</span><span class=w></span>
<span class=w>  </span><span class=nx>createdAt</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=w></span>
<span class=w>  </span><span class=nx>lastModifiedAt</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <p>It is recommended to type the responses to avoid potential bugs when consuming these services.</p> <h3 id=making-requests-inside-components>Making Requests Inside Components<a class=headerlink href=#making-requests-inside-components title="Permanent link">¶</a></h3> <p>Components that make requests should only do requests and present the data obtained through another component who's responsibility is to display this data.</p> <p>An example of what type of components could make fetch requests would be pages since technically they shouldn't render any visuals which should be rendered by other components instead.</p> <p>Anyways, let's use the above example to make a request that will get the data for a particular application.</p> <p>The page component that displays the application data should then import the following hooks and components:</p> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useQuery</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'@tanstack/react-query'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=nx>Loading</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'../../components/common/loading'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=nx>RequestErrorMessageFullPage</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'../../components/common/requestErrorMessageFullPage'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=nx>useApi</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'../../hooks/api'</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>And can then make the requests inside like:</p> <div class=highlight><pre><span></span><code><span class=kd>const</span><span class=w> </span><span class=nx>ApplicationPage</span><span class=o>:</span><span class=w> </span><span class=kt>React.FC</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>client</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useApi</span><span class=p>();</span><span class=w></span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>request</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>client</span><span class=p>.</span><span class=nx>application</span><span class=p>.</span><span class=nx>getApplicationByDomain</span><span class=p>(</span><span class=nx>domain</span><span class=p>);</span><span class=w> </span><span class=c1>// Domain could be acquired through the router params with useParams().</span><span class=w></span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>isLoading</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>,</span><span class=w> </span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>application</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useQuery</span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>key</span><span class=p>,</span><span class=w> </span><span class=nx>request</span><span class=p>.</span><span class=nx>fn</span><span class=p>);</span><span class=w></span>

<span class=w>  </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>isLoading</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=w></span>
<span class=w>      </span><span class=o>&lt;</span><span class=nx>Loading</span><span class=w> </span><span class=o>/&gt;</span><span class=w></span>
<span class=w>    </span><span class=p>);</span><span class=w></span>
<span class=w>  </span><span class=p>}</span><span class=w></span>

<span class=w>  </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=w></span>
<span class=w>      </span><span class=o>&lt;</span><span class=nx>RequestErrorMessageFullPage</span><span class=w> </span><span class=nx>error</span><span class=o>=</span><span class=p>{</span><span class=nx>error</span><span class=w> </span><span class=kr>as</span><span class=w> </span><span class=ne>Error</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span><span class=w></span>
<span class=w>    </span><span class=p>);</span><span class=w></span>
<span class=w>  </span><span class=p>}</span><span class=w></span>

<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=o>&lt;</span><span class=nx>PageWrapper</span><span class=o>&gt;</span><span class=w></span>
<span class=w>      </span><span class=o>&lt;</span><span class=nx>MyApplication</span><span class=w> </span><span class=nx>application</span><span class=o>=</span><span class=p>{</span><span class=nx>application</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span><span class=w></span>
<span class=w>    </span><span class=o>&lt;</span><span class=err>/PageWrapper&gt;</span><span class=w></span>
<span class=w>  </span><span class=p>);</span><span class=w></span>
<span class=p>};</span><span class=w></span>
</code></pre></div> <p>Notice how in this case, this component does not render anything visual with the data, it instead renders <code>&lt;MyApplication&gt;</code> which in itself is the one responsible of rendering the application data.</p> <p>As for the error, if the error should be displayed in full screen then the <code>&lt;RequestErrorMessageFullPage&gt;</code> component should be used. Otherwise, use <code>&lt;RequestErrorMessage&gt;</code>.</p> <h2 id=creating-forms>Creating Forms<a class=headerlink href=#creating-forms title="Permanent link">¶</a></h2> <p>Forms are an essential part of any web application and they can be quite cumbersome to implement them in a clean and modular way. In this project, the following structure is used for any form.</p> <ol> <li>A form component named <code>MyForm.tsx</code> will do any of the requests necessary to fetch data or to upload the form data. This component will render the next component.</li> <li>A form logic component named <code>MyFormLogic.tsx</code> will do any sort of validation prior to sending data, it will define the structure of the data that will be uploaded. This component will render the next component.</li> <li>A form view component named <code>MyFormView.tsx</code> will do the actual rendering of the form.</li> <li>An <code>index.ts</code> file that will proxy export <code>MyForm.tsx</code>.</li> <li>A <code>types.ts</code> file that will contain the interfaces of the request bodies (if used by a service) or any other structure that needs typing.</li> </ol> <p>This ensures that the components follow a proper separation of concerns.</p> <p>Any form should be placed in its own folder inside <code>src/components/forms</code>.</p> <h3 id=example-form>Example Form<a class=headerlink href=#example-form title="Permanent link">¶</a></h3> <p>Let's check an example. Let's say we want to create a form named <code>MyForm</code>.</p> <p>For this, let's create a folder inside <code>src/components/forms</code> named <code>myForm</code>.</p> <h4 id=myformtypests>myForm/types.ts<a class=headerlink href=#myformtypests title="Permanent link">¶</a></h4> <p>Let's define first the shape of the data that will be uploaded inside the <code>types.ts</code> file:</p> <div class=highlight><pre><span></span><code><span class=k>export</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=nx>MyData</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=w></span>
<span class=w>  </span><span class=nx>age</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=w></span>
<span class=p>}</span><span class=w></span>
</code></pre></div> <h4 id=myformmyformtsx>myForm/MyForm.tsx<a class=headerlink href=#myformmyformtsx title="Permanent link">¶</a></h4> <p>Let's define the component that will do all the requests.</p> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=nx>React</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'react'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useMutation</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'@tanstack/react-query'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=nx>Loading</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'../../common/loading'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=nx>RequestErrorMessageFullPage</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'../../common/requestErrorMessageFullPage'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=nx>MyFormLogic</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'./MyFormLogic'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=nx>useApi</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'../../../hooks/api'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>MyData</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'./types'</span><span class=p>;</span><span class=w></span>

<span class=kd>const</span><span class=w> </span><span class=nx>MyForm</span><span class=o>:</span><span class=w> </span><span class=kt>React.FC</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>client</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useApi</span><span class=p>();</span><span class=w></span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>request</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>client</span><span class=p>.</span><span class=nx>application</span><span class=p>.</span><span class=nx>postMyData</span><span class=p>();</span><span class=w></span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>mutation</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useMutation</span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>key</span><span class=p>,</span><span class=w> </span><span class=nx>request</span><span class=p>.</span><span class=nx>fn</span><span class=p>);</span><span class=w></span>

<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>handleSubmit</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>MyData</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>mutation</span><span class=p>.</span><span class=nx>mutateAsync</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span><span class=w></span>
<span class=w>  </span><span class=p>};</span><span class=w></span>

<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=o>&lt;</span><span class=nx>MyFormLogic</span><span class=w> </span><span class=nx>onSubmit</span><span class=o>=</span><span class=p>{</span><span class=nx>handleSubmit</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span><span class=w></span>
<span class=w>  </span><span class=p>);</span><span class=w></span>
<span class=p>};</span><span class=w></span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=nx>MyForm</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>This assumes a <code>postMyData()</code> method exists in <code>client.application</code> as a service. This is obviously not the case and is only here as an illustration.</p> <h4 id=myformmyformlogictsx>myForm/MyFormLogic.tsx<a class=headerlink href=#myformmyformlogictsx title="Permanent link">¶</a></h4> <p>Now, it's time to implement the logic component that will validate that the data inserted is correct.</p> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=nx>React</span><span class=p>,</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useState</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'react'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useForm</span><span class=p>,</span><span class=w> </span><span class=nx>SubmitHandler</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'react-hook-form'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>joiResolver</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'@hookform/resolvers/joi'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=nx>Joi</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'joi'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=nx>MyFormView</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'./MyFormView'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=nx>useLocale</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'../../../hooks/locale'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>MyData</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'./types'</span><span class=p>;</span><span class=w></span>

<span class=kd>interface</span><span class=w> </span><span class=nx>Props</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=nx>onSubmit</span><span class=o>:</span><span class=w> </span><span class=kt>SubmitHandler</span><span class=o>&lt;</span><span class=nx>MyData</span><span class=o>&gt;</span><span class=w></span>
<span class=p>}</span><span class=w></span>

<span class=kd>const</span><span class=w> </span><span class=nx>MyFormLogic</span><span class=o>:</span><span class=w> </span><span class=kt>React.FC</span><span class=o>&lt;</span><span class=nx>Props</span><span class=o>&gt;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>({</span><span class=w> </span><span class=nx>onSubmit</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>t</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useLocale</span><span class=p>();</span><span class=w></span>

<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>CreateMyDataSchema</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>Joi</span><span class=p>.</span><span class=nx>object</span><span class=o>&lt;</span><span class=nx>MyData</span><span class=o>&gt;</span><span class=p>({</span><span class=w></span>
<span class=w>    </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=kt>Joi.string</span><span class=p>().</span><span class=nx>min</span><span class=p>(</span><span class=mf>1</span><span class=p>).</span><span class=nx>trim</span><span class=p>().</span><span class=nx>required</span><span class=p>()</span><span class=w></span>
<span class=w>      </span><span class=p>.</span><span class=nx>messages</span><span class=p>({</span><span class=w></span>
<span class=w>        </span><span class=s1>'string.min'</span><span class=o>:</span><span class=w> </span><span class=nx>t</span><span class=p>(</span><span class=s1>'forms.my_form.errors.fields.name.min'</span><span class=p>),</span><span class=w></span>
<span class=w>        </span><span class=s1>'any.required'</span><span class=o>:</span><span class=w> </span><span class=nx>t</span><span class=p>(</span><span class=s1>'forms.my_form.errors.fields.name.required'</span><span class=p>),</span><span class=w></span>
<span class=w>        </span><span class=s1>'string.empty'</span><span class=o>:</span><span class=w> </span><span class=nx>t</span><span class=p>(</span><span class=s1>'forms.my_form.errors.fields.name.required'</span><span class=p>)</span><span class=w></span>
<span class=w>      </span><span class=p>}),</span><span class=w></span>
<span class=w>    </span><span class=nx>age</span><span class=o>:</span><span class=w> </span><span class=kt>Joi.number</span><span class=p>().</span><span class=nx>integer</span><span class=p>().</span><span class=nx>positive</span><span class=p>().</span><span class=nx>required</span><span class=p>()</span><span class=w></span>
<span class=w>      </span><span class=p>.</span><span class=nx>messages</span><span class=p>({</span><span class=w></span>
<span class=w>        </span><span class=s1>'number.base'</span><span class=o>:</span><span class=w> </span><span class=nx>t</span><span class=p>(</span><span class=s1>'forms.my_form.errors.fields.age.base'</span><span class=p>),</span><span class=w></span>
<span class=w>        </span><span class=s1>'number.positive'</span><span class=o>:</span><span class=w> </span><span class=nx>t</span><span class=p>(</span><span class=s1>'forms.my_form.errors.fields.age.positive'</span><span class=p>),</span><span class=w></span>
<span class=w>        </span><span class=s1>'any.required'</span><span class=o>:</span><span class=w> </span><span class=nx>t</span><span class=p>(</span><span class=s1>'forms.my_form.errors.fields.age.required'</span><span class=p>)</span><span class=w></span>
<span class=w>      </span><span class=p>})</span><span class=w></span>
<span class=w>  </span><span class=p>});</span><span class=w></span>

<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>form</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useForm</span><span class=o>&lt;</span><span class=nx>MyData</span><span class=o>&gt;</span><span class=p>({</span><span class=w></span>
<span class=w>    </span><span class=nx>mode</span><span class=o>:</span><span class=w> </span><span class=s1>'onSubmit'</span><span class=p>,</span><span class=w></span>
<span class=w>    </span><span class=nx>resolver</span><span class=o>:</span><span class=w> </span><span class=kt>joiResolver</span><span class=p>(</span><span class=nx>CreateMyDataSchema</span><span class=p>)</span><span class=w></span>
<span class=w>  </span><span class=p>});</span><span class=w></span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=p>[</span><span class=nx>error</span><span class=p>,</span><span class=w> </span><span class=nx>setError</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useState</span><span class=o>&lt;</span><span class=ne>Error</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=kc>null</span><span class=o>&gt;</span><span class=p>(</span><span class=kc>null</span><span class=p>);</span><span class=w></span>

<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>handleSubmit</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>async</span><span class=w> </span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>MyData</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>    </span><span class=k>try</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>      </span><span class=k>await</span><span class=w> </span><span class=nx>onSubmit</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>      </span><span class=nx>setError</span><span class=p>(</span><span class=nx>error</span><span class=w> </span><span class=kr>as</span><span class=w> </span><span class=ne>Error</span><span class=p>);</span><span class=w></span>
<span class=w>    </span><span class=p>}</span><span class=w></span>
<span class=w>  </span><span class=p>};</span><span class=w></span>

<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=o>&lt;</span><span class=nx>MyFormView</span><span class=w> </span><span class=nx>form</span><span class=o>=</span><span class=p>{</span><span class=nx>form</span><span class=p>}</span><span class=w> </span><span class=nx>onSubmit</span><span class=o>=</span><span class=p>{</span><span class=nx>handleSubmit</span><span class=p>}</span><span class=w> </span><span class=nx>error</span><span class=o>=</span><span class=p>{</span><span class=nx>error</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span><span class=w></span>
<span class=w>  </span><span class=p>);</span><span class=w></span>
<span class=p>};</span><span class=w></span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=nx>MyFormLogic</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>Notice how the <code>CreateMyDataSchema</code> contains localized string keys in the <code>messages()</code> method. This <code>messages()</code> method will define the validation error messages of the <a href=https://joi.dev/api/ >Joi</a> schema used.</p> <p>In this case, inside the <code>src/i18n/strings/en.ts</code> file we should add the following strings inside the <code>FORMS</code> object:</p> <div class=highlight><pre><span></span><code><span class=s1>'forms.my_form.errors.fields.name.min'</span><span class=o>:</span><span class=w> </span><span class=s1>'Your name should be at least 1 character long.'</span><span class=p>,</span><span class=w></span>
<span class=s1>'forms.my_form.errors.fields.name.required'</span><span class=o>:</span><span class=w> </span><span class=s1>'Your name is required.'</span><span class=p>,</span><span class=w></span>
<span class=s1>'forms.my_form.errors.fields.age.base'</span><span class=o>:</span><span class=w> </span><span class=s1>'Your age should be an integer.'</span><span class=p>,</span><span class=w></span>
<span class=s1>'forms.my_form.errors.fields.age.positive'</span><span class=o>:</span><span class=w> </span><span class=s1>'Your age should be a positive integer.'</span><span class=p>,</span><span class=w></span>
<span class=s1>'forms.my_form.errors.fields.age.required'</span><span class=o>:</span><span class=w> </span><span class=s1>'Your age is required.'</span><span class=p>,</span><span class=w></span>
</code></pre></div> <p>Needless to say, notice the structure of these keys. We already covered on why it was important to keep a concise naming convention for these keys.</p> <p>In this case, these keys convey the following information:</p> <ol> <li>They are used in a form because of the <code>forms</code>.</li> <li>They are used in <code>MyForm</code> because of the <code>my_form</code>.</li> <li>They are used in error messages because of the <code>errors</code>.</li> <li>They are used for errors related to a fields in the form because of <code>fields</code>.</li> <li>They are used in the <code>name</code> and <code>age</code> fields because of the <code>name</code> and <code>age</code>.</li> <li>They represent a specific error because of the <code>min</code>, <code>required</code>, <code>base</code> and <code>positive</code>.</li> </ol> <h4 id=myformmyformviewtsx>myForm/MyFormView.tsx<a class=headerlink href=#myformmyformviewtsx title="Permanent link">¶</a></h4> <p>Lastly, we need to create the form view.</p> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=nx>React</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'react'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>Box</span><span class=p>,</span><span class=w> </span><span class=nx>Form</span><span class=p>,</span><span class=w> </span><span class=nx>Button</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'react-bulma-components'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>SubmitHandler</span><span class=p>,</span><span class=w> </span><span class=nx>UseFormReturn</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'react-hook-form'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=nx>RequestErrorMessage</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'../../common/requestErrorMessage'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=nx>useLocale</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'../../../hooks/locale'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=nx>useFormHelper</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'../../../hooks/formHelper'</span><span class=p>;</span><span class=w></span>
<span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>MyData</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'./types'</span><span class=p>;</span><span class=w></span>

<span class=kd>interface</span><span class=w> </span><span class=nx>Props</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=nx>form</span><span class=o>:</span><span class=w> </span><span class=kt>UseFormReturn</span><span class=o>&lt;</span><span class=nx>MyData</span><span class=o>&gt;</span><span class=w></span>
<span class=w>  </span><span class=nx>onSubmit</span><span class=o>:</span><span class=w> </span><span class=kt>SubmitHandler</span><span class=o>&lt;</span><span class=nx>MyData</span><span class=o>&gt;</span><span class=w></span>
<span class=w>  </span><span class=nx>error?</span><span class=o>:</span><span class=w> </span><span class=kt>Error</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=kc>null</span><span class=w></span>
<span class=p>}</span><span class=w></span>

<span class=kd>const</span><span class=w> </span><span class=nx>MyFormView</span><span class=o>:</span><span class=w> </span><span class=kt>React.FC</span><span class=o>&lt;</span><span class=nx>Props</span><span class=o>&gt;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>({</span><span class=w> </span><span class=nx>form</span><span class=p>,</span><span class=w> </span><span class=nx>onSubmit</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=w> </span><span class=p>})</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span><span class=w></span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>t</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useLocale</span><span class=p>();</span><span class=w></span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>handleChangeNoValidation</span><span class=p>,</span><span class=w> </span><span class=nx>handleBlurValidate</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useFormHelper</span><span class=o>&lt;</span><span class=nx>MyData</span><span class=o>&gt;</span><span class=p>(</span><span class=nx>form</span><span class=p>);</span><span class=w></span>
<span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>handleSubmit</span><span class=p>,</span><span class=w> </span><span class=nx>formState</span><span class=o>:</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>isSubmitting</span><span class=p>,</span><span class=w> </span><span class=nx>errors</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>form</span><span class=p>;</span><span class=w></span>

<span class=w>  </span><span class=k>return</span><span class=w> </span><span class=p>(</span><span class=w></span>
<span class=w>    </span><span class=o>&lt;</span><span class=nx>Box</span><span class=o>&gt;</span><span class=w></span>
<span class=w>      </span><span class=o>&lt;</span><span class=nx>form</span><span class=w> </span><span class=nx>onSubmit</span><span class=o>=</span><span class=p>{</span><span class=nx>handleSubmit</span><span class=p>(</span><span class=nx>onSubmit</span><span class=p>)}</span><span class=o>&gt;</span><span class=w></span>
<span class=w>        </span><span class=o>&lt;</span><span class=nx>RequestErrorMessage</span><span class=w> </span><span class=nx>error</span><span class=o>=</span><span class=p>{</span><span class=nx>error</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span><span class=w></span>

<span class=w>        </span><span class=o>&lt;</span><span class=nx>Form</span><span class=p>.</span><span class=nx>Field</span><span class=o>&gt;</span><span class=w></span>
<span class=w>          </span><span class=o>&lt;</span><span class=nx>Form</span><span class=p>.</span><span class=nx>Label</span><span class=o>&gt;</span><span class=w></span>
<span class=w>            </span><span class=p>{</span><span class=nx>t</span><span class=p>(</span><span class=s1>'forms.my_form.name.label'</span><span class=p>)}</span><span class=w></span>
<span class=w>          </span><span class=o>&lt;</span><span class=err>/Form.Label&gt;</span><span class=w></span>
<span class=w>          </span><span class=o>&lt;</span><span class=nx>Form</span><span class=p>.</span><span class=nx>Control</span><span class=o>&gt;</span><span class=w></span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>Form</span><span class=p>.</span><span class=nx>Input</span><span class=w> </span><span class=kr>type</span><span class=o>=</span><span class=s2>"text"</span><span class=w> </span><span class=nx>name</span><span class=o>=</span><span class=s2>"name"</span><span class=w> </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{</span><span class=nx>handleChangeNoValidation</span><span class=p>}</span><span class=w> </span><span class=nx>onBlur</span><span class=o>=</span><span class=p>{</span><span class=nx>handleBlurValidate</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span><span class=w></span>
<span class=w>          </span><span class=o>&lt;</span><span class=err>/Form.Control&gt;</span><span class=w></span>
<span class=w>          </span><span class=o>&lt;</span><span class=nx>Form</span><span class=p>.</span><span class=nx>Help</span><span class=w> </span><span class=nx>color</span><span class=o>=</span><span class=s2>"danger"</span><span class=o>&gt;</span><span class=w></span>
<span class=w>            </span><span class=p>{</span><span class=nx>errors</span><span class=p>.</span><span class=nx>name</span><span class=o>?</span><span class=p>.</span><span class=nx>message</span><span class=p>}</span><span class=w></span>
<span class=w>          </span><span class=o>&lt;</span><span class=err>/Form.Help&gt;</span><span class=w></span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/Form.Field&gt;</span><span class=w></span>

<span class=w>        </span><span class=o>&lt;</span><span class=nx>Form</span><span class=p>.</span><span class=nx>Field</span><span class=o>&gt;</span><span class=w></span>
<span class=w>          </span><span class=o>&lt;</span><span class=nx>Form</span><span class=p>.</span><span class=nx>Label</span><span class=o>&gt;</span><span class=w></span>
<span class=w>            </span><span class=p>{</span><span class=nx>t</span><span class=p>(</span><span class=s1>'forms.my_form.age.label'</span><span class=p>)}</span><span class=w></span>
<span class=w>          </span><span class=o>&lt;</span><span class=err>/Form.Label&gt;</span><span class=w></span>
<span class=w>          </span><span class=o>&lt;</span><span class=nx>Form</span><span class=p>.</span><span class=nx>Control</span><span class=o>&gt;</span><span class=w></span>
<span class=w>            </span><span class=o>&lt;</span><span class=nx>Form</span><span class=p>.</span><span class=nx>Input</span><span class=w> </span><span class=kr>type</span><span class=o>=</span><span class=s2>"number"</span><span class=w> </span><span class=nx>name</span><span class=o>=</span><span class=s2>"age"</span><span class=w> </span><span class=nx>onChange</span><span class=o>=</span><span class=p>{</span><span class=nx>handleChangeNoValidation</span><span class=p>}</span><span class=w> </span><span class=nx>onBlur</span><span class=o>=</span><span class=p>{</span><span class=nx>handleBlurValidate</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span><span class=w></span>
<span class=w>          </span><span class=o>&lt;</span><span class=err>/Form.Control&gt;</span><span class=w></span>
<span class=w>          </span><span class=o>&lt;</span><span class=nx>Form</span><span class=p>.</span><span class=nx>Help</span><span class=w> </span><span class=nx>color</span><span class=o>=</span><span class=s2>"danger"</span><span class=o>&gt;</span><span class=w></span>
<span class=w>            </span><span class=p>{</span><span class=nx>errors</span><span class=p>.</span><span class=nx>age</span><span class=o>?</span><span class=p>.</span><span class=nx>message</span><span class=p>}</span><span class=w></span>
<span class=w>          </span><span class=o>&lt;</span><span class=err>/Form.Help&gt;</span><span class=w></span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/Form.Field&gt;</span><span class=w></span>

<span class=w>        </span><span class=o>&lt;</span><span class=nx>Button</span><span class=p>.</span><span class=nx>Group</span><span class=w> </span><span class=nx>align</span><span class=o>=</span><span class=s2>"right"</span><span class=o>&gt;</span><span class=w></span>
<span class=w>          </span><span class=o>&lt;</span><span class=nx>Button</span><span class=w> </span><span class=nx>color</span><span class=o>=</span><span class=s2>"primary"</span><span class=w> </span><span class=nx>submit</span><span class=w> </span><span class=nx>loading</span><span class=o>=</span><span class=p>{</span><span class=nx>isSubmitting</span><span class=p>}</span><span class=o>&gt;</span><span class=w></span>
<span class=w>            </span><span class=p>{</span><span class=nx>t</span><span class=p>(</span><span class=s1>'forms.my_form.buttons.submit.label'</span><span class=p>)}</span><span class=w></span>
<span class=w>          </span><span class=o>&lt;</span><span class=err>/Button&gt;</span><span class=w></span>
<span class=w>        </span><span class=o>&lt;</span><span class=err>/Button.Group&gt;</span><span class=w></span>
<span class=w>      </span><span class=o>&lt;</span><span class=err>/form&gt;</span><span class=w></span>
<span class=w>    </span><span class=o>&lt;</span><span class=err>/Box&gt;</span><span class=w></span>
<span class=w>  </span><span class=p>);</span><span class=w></span>
<span class=p>};</span><span class=w></span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=nx>MyFormView</span><span class=p>;</span><span class=w></span>
</code></pre></div> <p>In this case, what ties the form control with the data it controls is the <code>name</code> prop. Notice that the <code>name</code> prop is the same as the one we defined in the <code>CreateMyDataSchema</code>.</p> <p><code>handleChangeNoValidation()</code> and <code>handleBlurValidate()</code> are just functions exported by the <code>useFormHelper()</code> hook that allow to validate the data once the user loses focus on the input.</p> <p>This file also takes into account that the following strings need to be added in <code>src/i18n/strings/en.ts</code> inside the <code>FORMS</code> object:</p> <div class=highlight><pre><span></span><code><span class=s1>'forms.my_form.name.label'</span><span class=o>:</span><span class=w> </span><span class=s1>'Your Name'</span><span class=p>,</span><span class=w></span>
<span class=s1>'forms.my_form.age.label'</span><span class=o>:</span><span class=w> </span><span class=s1>'Your Age'</span><span class=p>,</span><span class=w></span>
<span class=s1>'forms.my_form.buttons.submit.label'</span><span class=o>:</span><span class=w> </span><span class=s1>'Submit'</span><span class=p>,</span><span class=w></span>
</code></pre></div> <h4 id=myformindexts>myForm/index.ts<a class=headerlink href=#myformindexts title="Permanent link">¶</a></h4> <p>Finally, we can proxy export the <code>MyForm.tsx</code> component:</p> <div class=highlight><pre><span></span><code><span class=k>import</span><span class=w> </span><span class=nx>MyForm</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>'./MyForm'</span><span class=p>;</span><span class=w></span>

<span class=k>export</span><span class=w> </span><span class=k>default</span><span class=w> </span><span class=nx>MyForm</span><span class=p>;</span><span class=w></span>
</code></pre></div> <hr> <div class=md-source-file> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">December 4, 2022</span> </small> </div> </article> </div> </div> <a class="md-top md-icon" data-md-component=top hidden href=#> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg> Back to top </a> </main> <footer class=md-footer> <nav aria-label=Footer class="md-footer__inner md-grid"> <a aria-label="Previous: Server" class="md-footer__link md-footer__link--prev" href=../server/ rel=prev> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Server </div> </div> </a> <a aria-label="Next: Introduction" class="md-footer__link md-footer__link--next" href=../connectors/ rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Introduction </div> </div> <div class="md-footer__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright © 2022 Freenalytics </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ rel=noopener target=_blank> Material for MkDocs </a> </div> <div class=md-social> <a class=md-social__link href=https://github.com/freenalytics rel=noopener target=_blank title="Freenalytics on GitHub"> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </a> <a class=md-social__link href=https://github.com/freenalytics/freenalytics/pkgs/container/freenalytics rel=noopener target=_blank title="Docker Image"> <svg viewbox="0 0 640 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"></path></svg> </a> <a class=md-social__link href=https://freenalytics.github.io/api-docs/ rel=noopener target=_blank title="API Reference"> <svg viewbox="0 0 640 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"></path></svg> </a> <a class=md-social__link href=https://trello.com/b/oDg8aD7n rel=noopener target=_blank title="Trello Board"> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M392.3 32H56.1C25.1 32 0 57.1 0 88c-.1 0 0-4 0 336 0 30.9 25.1 56 56 56h336.2c30.8-.2 55.7-25.2 55.7-56V88c.1-30.8-24.8-55.8-55.6-56zM197 371.3c-.2 14.7-12.1 26.6-26.9 26.6H87.4c-14.8.1-26.9-11.8-27-26.6V117.1c0-14.8 12-26.9 26.9-26.9h82.9c14.8 0 26.9 12 26.9 26.9v254.2zm193.1-112c0 14.8-12 26.9-26.9 26.9h-81c-14.8 0-26.9-12-26.9-26.9V117.2c0-14.8 12-26.9 26.8-26.9h81.1c14.8 0 26.9 12 26.9 26.9v142.1z"></path></svg> </a> <a class=md-social__link href=https://twitter.com/moonstar_x99 rel=noopener target=_blank title="Twitter Profile"> <svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.top", "navigation.tabs", "navigation.tracking", "navigation.expand", "search.suggest", "search.highlight"], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../assets/javascripts/bundle.39f04ddb.min.js></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body> </html>